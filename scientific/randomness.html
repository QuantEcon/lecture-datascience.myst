

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Randomness &#8212; QuantEcon DataScience</title>
    <script src="https://unpkg.com/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6.3.1/dist/tippy-bundle.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    
        <script>
            MathJax = {
            loader: {load: ['[tex]/boldsymbol', '[tex]/textmacros']},
            tex: {
                packages: {'[+]': ['boldsymbol', 'textmacros']},
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                processEscapes: true,
                macros: {
                    "argmax" : "arg\\,max",
                    "argmin" : "arg\\,min",
                    "col"    : "col",
                    "Span"   :  "span",
                    "epsilon": "\\varepsilon",
                    "EE": "\\mathbb{E}",
                    "PP": "\\mathbb{P}",
                    "RR": "\\mathbb{R}",
                    "NN": "\\mathbb{N}",
                    "ZZ": "\\mathbb{Z}",
                    "aA": "\\mathcal{A}",
                    "bB": "\\mathcal{B}",
                    "cC": "\\mathcal{C}",
                    "dD": "\\mathcal{D}",
                    "eE": "\\mathcal{E}",
                    "fF": "\\mathcal{F}",
                    "gG": "\\mathcal{G}",
                    "hH": "\\mathcal{H}",
                }
            },
            svg: {
                fontCache: 'global',
                scale: 0.92,
                displayAlign: "center",
            },
            };
        </script>
    
    
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/quantecon-book-theme.279dae03c5caae754d20501e3fa00bbf.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />


    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script src="../_static/quantecon-book-theme.15b0c36fffe88f468997fa7b698991d3.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-S8CBQPC844"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-S8CBQPC844');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"tex": {"extensions": ["autobold.js"], "macros": {"argmax": "arg\\,max", "argmin": "arg\\,min", "col": "col"}, "processEscapes": true}, "svg": {"scale": "0.92,"}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'scientific/randomness';</script>
    <link rel="canonical" href="https://datascience.quantecon.org/scientific/randomness.html" />
    <link rel="shortcut icon" href="../_static/lectures-favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Optimization" href="optimization.html" />
    <link rel="prev" title="Applied Linear Algebra" href="applied_linalg.html" />

<!-- Normal Meta Tags -->
<meta name="author" context="Chase Coleman, Spencer Lyon, and Jesse Perla" />
<meta name="keywords" content="Python, QuantEcon, DataScience" />
<meta name="description" content=This website presents a series of lectures on programming, data science, and economics. />

<!-- Twitter tags -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@quantecon" />
<meta name="twitter:title" content="Randomness"/>
<meta name="twitter:description" content="This website presents a series of lectures on programming, data science, and economics.">
<meta name="twitter:creator" content="@quantecon">
<meta name="twitter:image" content="https://assets.quantecon.org/img/qe-twitter-logo.png">

<!-- Opengraph tags -->
<meta property="og:title" content="Randomness" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://datascience.quantecon.org/scientific/randomness.html" />
<meta property="og:image" content="https://assets.quantecon.org/img/qe-og-logo.png" />
<meta property="og:description" content="This website presents a series of lectures on programming, data science, and economics." />
<meta property="og:site_name" content="QuantEcon DataScience" />
<meta name="theme-color" content="#ffffff" />

  </head>
<body>


    <span id="top"></span>

    <div class="qe-wrapper">

        <div class="qe-main">

            <div class="qe-page" id=scientific/randomness>

                <div class="qe-page__toc">

                    <div class="inner">

                        
                        <div class="qe-page__toc-header">
                            On this page
                        </div>


                        <nav id="bd-toc-nav" class="qe-page__toc-nav">
                            <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Randomness</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#probability">Probability</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simulating-randomness-in-python">Simulating Randomness in Python</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-we-need-randomness">Why Do We Need Randomness?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#discrete-distributions">Discrete Distributions</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#aside-vectorized-computations">Aside: Vectorized Computations</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aside-using-class-to-hold-parameters">Aside: Using Class to Hold Parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#profitability-threshold">Profitability Threshold</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#loan-states">Loan States</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#continuous-distributions">Continuous Distributions</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">Exercises</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4">Exercise 4</a></li>
</ul>
</li>
</ul>
                            <p class="logo">
                                
                                    
                                    <a href=https://quantecon.org><img src="../_static/datascience-logo.png" class="logo" alt="logo"></a>
                                    
                                
                            </p>

                            <p class="powered">Powered by <a href="https://jupyterbook.org/">Jupyter Book</a></p>

                        </nav>

                        <div class="qe-page__toc-footer">
                            
                            
                            <p><a href="#top"><strong>Back to top</strong></a></p>
                        </div>

                    </div>

                </div>

                <div class="qe-page__header">

                    <div class="qe-page__header-copy">

                        <p class="qe-page__header-heading"><a href="../index.html">QuantEcon DataScience</a></p>

                        <p class="qe-page__header-subheading">Randomness</p>

                    </div>

                    <p class="qe-page__header-authors">Chase Coleman, Spencer Lyon, and Jesse Perla</p>

                </div> <!-- .page__header -->



                
                <main class="qe-page__content" role="main">
                    
                    <div>
                        
  <section class="tex2jax_ignore mathjax_ignore" id="randomness">
<h1>Randomness<a class="headerlink" href="#randomness" title="Permalink to this heading">#</a></h1>
<p><strong>Co-author</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://www.psolimine.net">Philip Solimine, <em>UBC</em></a></p></li>
</ul>
</div></blockquote>
<p><strong>Prerequisites</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="numpy_arrays.html"><span class="doc">Introduction to Numpy</span></a></p></li>
<li><p><a class="reference internal" href="applied_linalg.html"><span class="doc">Applied Linear Algebra</span></a></p></li>
</ul>
<p><strong>Outcomes</strong></p>
<ul class="simple">
<li><p>Recall basic probability</p></li>
<li><p>Draw random numbers from numpy</p></li>
<li><p>Understand why simulation is useful</p></li>
<li><p>Understand the basics of Markov chains and using the <code class="docutils literal notranslate"><span class="pre">quantecon</span></code> library to study them</p></li>
<li><p>Simulate discrete and continuous random variables and processes</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Uncomment following line to install on colab</span>
<span class="c1">#! pip install </span>
</pre></div>
</div>
<section id="id1">
<h2>Randomness<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h2>
<p>We will use the <code class="docutils literal notranslate"><span class="pre">numpy.random</span></code> package to simulate randomness in Python.</p>
<p>This lecture will present various probability distributions and then use
numpy.random to numerically verify some of the facts associated with them.</p>
<p>We import <code class="docutils literal notranslate"><span class="pre">numpy</span></code> as usual</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</div>
<section id="probability">
<h3>Probability<a class="headerlink" href="#probability" title="Permalink to this heading">#</a></h3>
<p>Before we learn how to use Python to generate randomness, we should make sure
that we all agree on some basic concepts of probability.</p>
<p>To think about the probability of some event occurring, we must understand what possible
events could occur – mathematicians refer to this as the <em>event space</em>.</p>
<p>Some examples are</p>
<ul class="simple">
<li><p>For a coin flip, the coin could either come up heads, tails, or land on its side.</p></li>
<li><p>The inches of rain falling in a certain location on a given day could be any real
number between 0 and <span class="math notranslate nohighlight">\(\infty\)</span>.</p></li>
<li><p>The change in an S&amp;P500 stock price could be any real number between
<span class="math notranslate nohighlight">\(-\)</span> opening price and <span class="math notranslate nohighlight">\(\infty\)</span>.</p></li>
<li><p>An individual’s employment status tomorrow could either be employed or unemployed.</p></li>
<li><p>And the list goes on…</p></li>
</ul>
<p>Notice that in some of these cases, the event space can be counted (coin flip and employment status)
while in others, the event space cannot be counted (rain and stock prices).</p>
<p>We refer to random variables with countable event spaces as <em>discrete random variables</em> and
random variables with uncountable event spaces as <em>continuous random variables</em>.</p>
<p>We then call certain numbers ‘probabilities’ and associate them with events from the event space.</p>
<p>The following is true about probabilities.</p>
<ol class="arabic simple">
<li><p>The probability of any event must be greater than or equal to 0.</p></li>
<li><p>The probability of all events from the event space must sum (or integrate) to 1.</p></li>
<li><p>If two events cannot occur at same time, then the probability that at least one of them occurs is
the sum of the probabilities that each event occurs (known as independence).</p></li>
</ol>
<p>We won’t rely on these for much of what we learn in this class, but occasionally, these facts will
help us reason through what is happening.</p>
</section>
<section id="simulating-randomness-in-python">
<h3>Simulating Randomness in Python<a class="headerlink" href="#simulating-randomness-in-python" title="Permalink to this heading">#</a></h3>
<p>One of the most basic random numbers is a variable that has equal probability of being any value
between 0 and 1.</p>
<p>You may have previously learned about this probability distribution as the Uniform(0, 1).</p>
<p>Let’s dive into generating some random numbers.</p>
<p>Run the code below multiple times and see what numbers you get.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.19893652321657773
</pre></div>
</div>
</div>
</div>
<p>We can also generate arrays of random numbers.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0.09224261, 0.00380292, 0.88661894, 0.21836773, 0.75123059,
       0.62715458, 0.49798124, 0.71777992, 0.52175992, 0.74969673,
       0.77075772, 0.70632526, 0.60936053, 0.99136534, 0.08782659,
       0.31021466, 0.83267276, 0.10745435, 0.36450917, 0.15319594,
       0.5701503 , 0.86370203, 0.71817689, 0.49742973, 0.66533947])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0.53083247, 0.26394665, 0.19407818, 0.04253022, 0.76541374],
       [0.08116365, 0.33858832, 0.75166663, 0.57588238, 0.42100184],
       [0.37189136, 0.23698401, 0.09359451, 0.86047435, 0.9800506 ],
       [0.2427735 , 0.41221441, 0.86413776, 0.99571764, 0.884003  ],
       [0.68896326, 0.83063677, 0.13113551, 0.4287521 , 0.84438494]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[[0.19430503, 0.27241728, 0.21803597, 0.20294772],
        [0.31331722, 0.09825175, 0.41128553, 0.78028173],
        [0.31586515, 0.64167929, 0.42034541, 0.99229923]],

       [[0.77263916, 0.03652876, 0.29748799, 0.23990471],
        [0.90268935, 0.01421605, 0.90293716, 0.66208799],
        [0.9870924 , 0.31008437, 0.56002042, 0.03971145]]])
</pre></div>
</div>
</div>
</div>
</section>
<section id="why-do-we-need-randomness">
<h3>Why Do We Need Randomness?<a class="headerlink" href="#why-do-we-need-randomness" title="Permalink to this heading">#</a></h3>
<p>As economists and data scientists, we study complex systems.</p>
<p>These systems have inherent randomness, but they do not readily reveal their underlying distribution
to us.</p>
<p>In cases where we face this difficulty, we turn to a set of tools known as Monte Carlo
methods.</p>
<p>These methods effectively boil down to repeatedly simulating some event (or events) and looking at
the outcome distribution.</p>
<p>This tool is used to inform decisions in search and rescue missions, election predictions, sports,
and even by the Federal Reserve.</p>
<p>The reasons that Monte Carlo methods work is a mathematical theorem known as the <em>Law of Large
Numbers</em>.</p>
<p>The Law of Large Numbers basically says that under relatively general conditions, the distribution of simulated outcomes will mimic the true distribution as the number of simulated events goes to infinity.</p>
<p>We already know how the uniform distribution looks, so let’s demonstrate the Law of Large Numbers by approximating the uniform distribution.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Draw various numbers of uniform[0, 1] random variables</span>
<span class="n">draws_10</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">draws_200</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">draws_10000</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10_000</span><span class="p">)</span>

<span class="c1"># Plot their histograms</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Histogram with 10 draws&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">draws_10</span><span class="p">)</span>

<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Histogram with 200 draws&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">draws_200</span><span class="p">)</span>

<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Histogram with 10,000 draws&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">draws_10000</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/4986ca6df161b2178c8ad58681ec2e2d8a69d6cb7da0d7bddd86f3bc976a60e4.png" src="../_images/4986ca6df161b2178c8ad58681ec2e2d8a69d6cb7da0d7bddd86f3bc976a60e4.png" />
</div>
</div>
<div class="admonition-exercise admonition" id="dir3-4-1">
<p class="admonition-title">Exercise</p>
<p>See exercise 1 in the <a class="reference internal" href="#ex3-4"><span class="std std-ref">exercise list</span></a>.</p>
</div>
</section>
<section id="discrete-distributions">
<h3>Discrete Distributions<a class="headerlink" href="#discrete-distributions" title="Permalink to this heading">#</a></h3>
<p>Sometimes we will encounter variables that can only take one of a
few possible values.</p>
<p>We refer to this type of random variable as a discrete distribution.</p>
<p>For example, consider a small business loan company.</p>
<p>Imagine that the company’s loan requires a repayment of <span class="math notranslate nohighlight">\(\$25,000\)</span> and must be repaid 1 year
after the loan was made.</p>
<p>The company discounts the future at 5%.</p>
<p>Additionally, the loans made are repaid in full with 75% probability, while
<span class="math notranslate nohighlight">\(\$12,500\)</span> of loans is repaid with probability 20%, and no repayment with 5%
probability.</p>
<p>How much would the small business loan company be willing to loan if they’d like to
– on average – break even?</p>
<p>In this case, we can compute this by hand:</p>
<p>The amount repaid, on average, is: <span class="math notranslate nohighlight">\(0.75(25,000) + 0.2(12,500) + 0.05(0) = 21,250\)</span>.</p>
<p>Since we’ll receive that amount in one year, we have to discount it:
<span class="math notranslate nohighlight">\(\frac{1}{1+0.05} 21,250 \approx 20238\)</span>.</p>
<p>We can now verify by simulating the outcomes of many loans.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># You&#39;ll see why we call it `_slow` soon :)</span>
<span class="k">def</span> <span class="nf">simulate_loan_repayments_slow</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">repayment_full</span><span class="o">=</span><span class="mf">25_000.0</span><span class="p">,</span>
                                  <span class="n">repayment_part</span><span class="o">=</span><span class="mf">12_500.0</span><span class="p">):</span>
    <span class="n">repayment_sims</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span>  <span class="c1"># Draw a random number</span>

        <span class="c1"># Full repayment 75% of time</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mf">0.75</span><span class="p">:</span>
            <span class="n">repaid</span> <span class="o">=</span> <span class="n">repayment_full</span>
        <span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mf">0.95</span><span class="p">:</span>
            <span class="n">repaid</span> <span class="o">=</span> <span class="n">repayment_part</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">repaid</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="n">repayment_sims</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">r</span><span class="p">))</span> <span class="o">*</span> <span class="n">repaid</span>

    <span class="k">return</span> <span class="n">repayment_sims</span>

<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">simulate_loan_repayments_slow</span><span class="p">(</span><span class="mi">25_000</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>20229.523809523806
</pre></div>
</div>
</div>
</div>
<section id="aside-vectorized-computations">
<h4>Aside: Vectorized Computations<a class="headerlink" href="#aside-vectorized-computations" title="Permalink to this heading">#</a></h4>
<p>The code above illustrates the concepts we were discussing but is much slower than
necessary.</p>
<p>Below is a version of our function that uses numpy arrays to perform computations
instead of only storing the values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">simulate_loan_repayments</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">repayment_full</span><span class="o">=</span><span class="mf">25_000.0</span><span class="p">,</span>
                             <span class="n">repayment_part</span><span class="o">=</span><span class="mf">12_500.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulate present value of N loans given values for discount rate and</span>
<span class="sd">    repayment values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">random_numbers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

    <span class="c1"># start as 0 -- no repayment</span>
    <span class="n">repayment_sims</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

    <span class="c1"># adjust for full and partial repayment</span>
    <span class="n">partial</span> <span class="o">=</span> <span class="n">random_numbers</span> <span class="o">&lt;=</span> <span class="mf">0.20</span>
    <span class="n">repayment_sims</span><span class="p">[</span><span class="n">partial</span><span class="p">]</span> <span class="o">=</span> <span class="n">repayment_part</span>

    <span class="n">full</span> <span class="o">=</span> <span class="o">~</span><span class="n">partial</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">random_numbers</span> <span class="o">&lt;=</span> <span class="mf">0.95</span><span class="p">)</span>
    <span class="n">repayment_sims</span><span class="p">[</span><span class="n">full</span><span class="p">]</span> <span class="o">=</span> <span class="n">repayment_full</span>

    <span class="n">repayment_sims</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">r</span><span class="p">))</span> <span class="o">*</span> <span class="n">repayment_sims</span>

    <span class="k">return</span> <span class="n">repayment_sims</span>

<span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">simulate_loan_repayments</span><span class="p">(</span><span class="mi">25_000</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>20163.809523809523
</pre></div>
</div>
</div>
</div>
<p>We’ll quickly demonstrate the time difference in running both function versions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> simulate_loan_repayments_slow(250_000)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>113 ms ± 654 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> simulate_loan_repayments(250_000)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5.29 ms ± 10.5 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</pre></div>
</div>
</div>
</div>
<p>The timings for my computer were 167 ms for <code class="docutils literal notranslate"><span class="pre">simulate_loan_repayments_slow</span></code> and 5.05 ms for
<code class="docutils literal notranslate"><span class="pre">simulate_loan_repayments</span></code>.</p>
<p>This function is simple enough that both times are acceptable, but the 33x time difference could
matter in a more complicated operation.</p>
<p>This illustrates a concept called <em>vectorization</em>, which is when computations
operate on an entire array at a time.</p>
<p>In general, numpy code that is <em>vectorized</em> will perform better than numpy code that operates on one
element at a time.</p>
<p>For more information see the
<a class="reference external" href="https://python-programming.quantecon.org/numba.html">QuantEcon lecture on performance Python</a> code.</p>
</section>
</section>
<section id="aside-using-class-to-hold-parameters">
<h3>Aside: Using Class to Hold Parameters<a class="headerlink" href="#aside-using-class-to-hold-parameters" title="Permalink to this heading">#</a></h3>
<p>We have been using objects and classes both internal to python (e.g. <code class="docutils literal notranslate"><span class="pre">list</span></code>) from external libraries (e.g. <code class="docutils literal notranslate"><span class="pre">numpy.array</span></code>). Sometimes it is convenient to create your own classes to organize parameter, data, and functions.</p>
<p>In this section we will reimplement our function using new classes to hold parameters.</p>
<p>First, we rewrite <code class="docutils literal notranslate"><span class="pre">simulate_loan_repayments</span></code>  so that instead of a collection of individual parameters, it takes in an object (titles <code class="docutils literal notranslate"><span class="pre">params</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">simulate_loan_repayments_2</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>    
    <span class="c1"># Extract fields from params object</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">r</span>
    <span class="n">repayment_part</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">repayment_part</span>
    <span class="n">repayment_full</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">repayment_full</span>

    <span class="n">random_numbers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

    <span class="c1"># start as 0 -- no repayment</span>
    <span class="n">repayment_sims</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

    <span class="c1"># adjust for full and partial repayment</span>
    <span class="n">partial</span> <span class="o">=</span> <span class="n">random_numbers</span> <span class="o">&lt;=</span> <span class="mf">0.20</span>
    <span class="n">repayment_sims</span><span class="p">[</span><span class="n">partial</span><span class="p">]</span> <span class="o">=</span> <span class="n">repayment_part</span>

    <span class="n">full</span> <span class="o">=</span> <span class="o">~</span><span class="n">partial</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">random_numbers</span> <span class="o">&lt;=</span> <span class="mf">0.95</span><span class="p">)</span>
    <span class="n">repayment_sims</span><span class="p">[</span><span class="n">full</span><span class="p">]</span> <span class="o">=</span> <span class="n">repayment_full</span>

    <span class="n">repayment_sims</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">r</span><span class="p">))</span> <span class="o">*</span> <span class="n">repayment_sims</span>

    <span class="k">return</span> <span class="n">repayment_sims</span>
</pre></div>
</div>
</div>
</div>
<p>Any object which fulfills <code class="docutils literal notranslate"><span class="pre">params.r,</span> <span class="pre">params.replayment_part</span></code> and <code class="docutils literal notranslate"><span class="pre">params.repayment_full</span></code> will work, so we will create a few versions of this to explore features of custom classes in Python.</p>
<p>The most important function in a class is the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> function which determines how it is constructed and creates an object of that type.  This function has the special argument <code class="docutils literal notranslate"><span class="pre">self</span></code> which refers to the new object being created, and with which you can easily add new fields.  For example,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">LoanRepaymentParams</span><span class="p">:</span>
    <span class="c1"># A special function &#39;constructor&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">repayment_full</span><span class="p">,</span> <span class="n">repayment_part</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r</span> <span class="o">=</span> <span class="n">r</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repayment_full</span> <span class="o">=</span> <span class="n">repayment_full</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repayment_part</span> <span class="o">=</span> <span class="n">repayment_part</span>

<span class="c1"># Create an instance of the class        </span>
<span class="n">params</span> <span class="o">=</span> <span class="n">LoanRepaymentParams</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">50_000.0</span><span class="p">,</span> <span class="mi">25_000</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.05
</pre></div>
</div>
</div>
</div>
<p>The inside of the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> function simply takes the arguments and assigns them as new fields in the <code class="docutils literal notranslate"><span class="pre">self</span></code>.  Calling the <code class="docutils literal notranslate"><span class="pre">LoanRepaymentParams(...)</span></code> implicitly calls the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> function and returns the new object.</p>
<p>We can then use the new object to call the function <code class="docutils literal notranslate"><span class="pre">simulate_loan_repayments_2</span></code> as before.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">N</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">params</span> <span class="o">=</span> <span class="n">LoanRepaymentParams</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">50_000.0</span><span class="p">,</span> <span class="mi">25_000</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">simulate_loan_repayments_2</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">params</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>40666.666666666664
</pre></div>
</div>
</div>
</div>
<p>One benefit of using a class is that you can do calculations in the constructor.  For example, instead of passing in the partial repayment amount, we could pass in the fraction of the full repayment that is paid.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">LoanRepaymentParams2</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">repayment_full</span><span class="p">,</span> <span class="n">partial_fraction</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r</span> <span class="o">=</span> <span class="n">r</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repayment_full</span> <span class="o">=</span> <span class="n">repayment_full</span>
        
        <span class="c1"># This does a calculation and sets a new value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repayment_part</span> <span class="o">=</span> <span class="n">repayment_full</span> <span class="o">*</span> <span class="n">partial_fraction</span>

<span class="c1"># Create an instance of the class        </span>
<span class="n">params</span> <span class="o">=</span> <span class="n">LoanRepaymentParams2</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">50_000.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>        
<span class="nb">print</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">repayment_part</span><span class="p">)</span> <span class="c1"># Acccess the calculation</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">simulate_loan_repayments_2</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">params</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>25000.0
39571.428571428565
</pre></div>
</div>
</div>
</div>
<p>This setup a default value for the <code class="docutils literal notranslate"><span class="pre">partial_fraction</span></code> so that we could also have called this with <code class="docutils literal notranslate"><span class="pre">LoanRepaymentParams2(0.05,</span> <span class="pre">50_000)</span></code>.</p>
<p>Finally, there are some special features we can use to create classes in python which automatically create the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> function, allow for more easily setting default values.   The easiest is to create a <code class="docutils literal notranslate"><span class="pre">dataclass</span></code> (see <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html">documentation</a>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>

<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">LoanRepaymentParams3</span><span class="p">:</span>
    <span class="n">r</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.05</span>
    <span class="n">repayment_full</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">50_000</span>
    <span class="n">repayment_part</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">25_000</span>

<span class="n">params</span> <span class="o">=</span> <span class="n">LoanRepaymentParams3</span><span class="p">()</span> <span class="c1"># uses all defaults</span>
<span class="n">params2</span> <span class="o">=</span> <span class="n">LoanRepaymentParams3</span><span class="p">(</span><span class="n">repayment_full</span><span class="o">=</span> <span class="mi">60_000</span><span class="p">)</span> <span class="c1"># changes the full repayment amount</span>

<span class="c1"># show the objects</span>
<span class="nb">print</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">params2</span><span class="p">)</span>

<span class="c1"># simulate using the new object</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">simulate_loan_repayments_2</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">params2</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>LoanRepaymentParams3(r=0.05, repayment_full=50000, repayment_part=25000)
LoanRepaymentParams3(r=0.05, repayment_full=60000, repayment_part=25000)
48685.71428571428
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&#64;dataclass</span></code> is an example of a python decorator (see <a class="reference external" href="https://docs.python.org/3/glossary.html#term-decorator">documentation</a>). Decorators take in a class (or function) and return a new class (or function) with some additional features.  In this case, it automatically creates the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> function, allows for default values, and adds a new <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> function which determines how the object is printed.</p>
<section id="profitability-threshold">
<h4>Profitability Threshold<a class="headerlink" href="#profitability-threshold" title="Permalink to this heading">#</a></h4>
<p>Rather than looking for the break even point, we might be interested in the largest loan size that
ensures we still have a 95% probability of profitability in a year we make 250 loans.</p>
<p>This is something that could be computed by hand, but it is much easier to answer through
simulation!</p>
<p>If we simulate 250 loans many times and keep track of what the outcomes look like, then we can look
at the the 5th percentile of total repayment to find the loan size needed for 95% probability of
being profitable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">simulate_year_of_loans</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">K</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>

    <span class="c1"># Create array where we store the values</span>
    <span class="n">avg_repayments</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">K</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">K</span><span class="p">):</span>

        <span class="n">repaid_year</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">n_loans</span> <span class="o">=</span> <span class="n">simulate_loan_repayments</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
        <span class="n">avg_repayments</span><span class="p">[</span><span class="n">year</span><span class="p">]</span> <span class="o">=</span> <span class="n">n_loans</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">avg_repayments</span>

<span class="n">loan_repayment_outcomes</span> <span class="o">=</span> <span class="n">simulate_year_of_loans</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>

<span class="c1"># Think about why we use the 5th percentile of outcomes to</span>
<span class="c1"># compute when we are profitable 95% of time</span>
<span class="n">lro_5</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">loan_repayment_outcomes</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The largest loan size such that we were profitable 95</span><span class="si">% o</span><span class="s2">f time is&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">lro_5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The largest loan size such that we were profitable 95% of time is
19571.428571428572
</pre></div>
</div>
</div>
</div>
<p>Now let’s consider what we could learn if our loan company had even more detailed information about
how the life of their loans progressed.</p>
</section>
<section id="loan-states">
<h4>Loan States<a class="headerlink" href="#loan-states" title="Permalink to this heading">#</a></h4>
<p>Loans can have 3 potential statuses (or states):</p>
<ol class="arabic simple">
<li><p>Repaying: Payments are being made on loan.</p></li>
<li><p>Delinquency: No payments are currently being made, but they might be made in the future.</p></li>
<li><p>Default: No payments are currently being made and no more payments will be made in future.</p></li>
</ol>
<p>The small business loans company knows the following:</p>
<ul class="simple">
<li><p>If a loan is currently in repayment, then it has an 85% probability of continuing being repaid, a
10% probability of going into delinquency, and a 5% probability of going into default.</p></li>
<li><p>If a loan is currently in delinquency, then it has a 25% probability of returning to repayment, a
60% probability of staying delinquent, and a 15% probability of going into default.</p></li>
<li><p>If a loan is currently in default, then it remains in default with 100% probability.</p></li>
</ul>
<p>For simplicity, let’s imagine that 12 payments are made during the life of a loan, even though
this means people who experience delinquency won’t be required to repay their remaining balance.</p>
<p>Let’s write the code required to perform this dynamic simulation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">simulate_loan_lifetime</span><span class="p">(</span><span class="n">monthly_payment</span><span class="p">):</span>

    <span class="c1"># Create arrays to store outputs</span>
    <span class="n">payments</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
    <span class="c1"># Note: dtype &#39;U12&#39; means a string with no more than 12 characters</span>
    <span class="n">statuses</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="p">[</span><span class="s2">&quot;repaying&quot;</span><span class="p">,</span> <span class="s2">&quot;delinquency&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;U12&quot;</span><span class="p">)</span>

    <span class="c1"># Everyone is repaying during their first month</span>
    <span class="n">payments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">monthly_payment</span>
    <span class="n">statuses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;repaying&quot;</span>

    <span class="k">for</span> <span class="n">month</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">):</span>
        <span class="n">rn</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">statuses</span><span class="p">[</span><span class="n">month</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;repaying&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">rn</span> <span class="o">&lt;</span> <span class="mf">0.85</span><span class="p">:</span>
                <span class="n">payments</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="n">monthly_payment</span>
                <span class="n">statuses</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;repaying&quot;</span>
            <span class="k">elif</span> <span class="n">rn</span> <span class="o">&lt;</span> <span class="mf">0.95</span><span class="p">:</span>
                <span class="n">payments</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="n">statuses</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;delinquency&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">payments</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="n">statuses</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">statuses</span><span class="p">[</span><span class="n">month</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;delinquency&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">rn</span> <span class="o">&lt;</span> <span class="mf">0.25</span><span class="p">:</span>
                <span class="n">payments</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="n">monthly_payment</span>
                <span class="n">statuses</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;repaying&quot;</span>
            <span class="k">elif</span> <span class="n">rn</span> <span class="o">&lt;</span> <span class="mf">0.85</span><span class="p">:</span>
                <span class="n">payments</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="n">statuses</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;delinquency&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">payments</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="n">statuses</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># Default -- Stays in default after it gets there</span>
            <span class="n">payments</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">statuses</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>

    <span class="k">return</span> <span class="n">payments</span><span class="p">,</span> <span class="n">statuses</span>
</pre></div>
</div>
</div>
</div>
<p>We can use this model of the world to answer even more questions than the last model!</p>
<p>For example, we can think about things like</p>
<ul class="simple">
<li><p>For the defaulted loans, how many payments did they make before going into default?</p></li>
<li><p>For those who partially repaid, how much was repaid before the 12 months was over?</p></li>
</ul>
<p>Unbeknownst to you, we have just introduced a well-known mathematical concept known as a Markov
chain.</p>
<p>A Markov chain is a random process (Note: Random process is a sequence of random variables
observed over time) where the probability of something happening tomorrow only depends on what we
can observe today.</p>
<p>In our small business loan example, this just means that the small business loan’s repayment status
tomorrow only depended on what its repayment status was today.</p>
<p>Markov chains often show up in economics and statistics, so we decided a simple introduction would
be helpful, but we leave out many details for the interested reader to find.</p>
<p>A Markov chain is defined by three objects:</p>
<ol class="arabic simple">
<li><p>A description of the possible states and their associated value.</p></li>
<li><p>A complete description of the probability of moving from one state to all other states.</p></li>
<li><p>An initial distribution over the states (often a vector of all zeros except for a single 1 for
some particular state).</p></li>
</ol>
<p>For the example above, we’ll define each of these three things in the Python code below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. State description</span>
<span class="n">state_values</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;repaying&quot;</span><span class="p">,</span> <span class="s2">&quot;delinquency&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">]</span>

<span class="c1"># 2. Transition probabilities: encoded in a matrix (2d-array) where element [i, j]</span>
<span class="c1"># is the probability of moving from state i to state j</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.85</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>

<span class="c1"># 3. Initial distribution: assume loans start in repayment</span>
<span class="n">x0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Now that we have these objects defined, we can use the a <code class="docutils literal notranslate"><span class="pre">MarkovChain</span></code> class from the
<a class="reference external" href="https://github.com/QuantEcon/QuantEcon.py/">quantecon python library</a> to analyze this model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">quantecon</span> <span class="k">as</span> <span class="nn">qe</span>

<span class="n">mc</span> <span class="o">=</span> <span class="n">qe</span><span class="o">.</span><span class="n">markov</span><span class="o">.</span><span class="n">MarkovChain</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="n">state_values</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">mc</span></code> object to do common Markov chain operations.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">simulate</span></code> method will simulate the Markov chain for a specified number of steps:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mc</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="s2">&quot;repaying&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;repaying&#39;, &#39;repaying&#39;, &#39;repaying&#39;, &#39;repaying&#39;, &#39;repaying&#39;,
       &#39;repaying&#39;, &#39;repaying&#39;, &#39;repaying&#39;, &#39;repaying&#39;, &#39;repaying&#39;,
       &#39;repaying&#39;, &#39;repaying&#39;], dtype=&#39;&lt;U11&#39;)
</pre></div>
</div>
</div>
</div>
<p>Suppose we were to simulate the Markov chain for an infinite number of steps.</p>
<p>Given the random nature of transitions, we might end up taking different paths at any given moment.</p>
<p>We can summarize all possible paths over time by keeping track of a distribution.</p>
<p>Below, we will print out the distribution for the first 10 time steps,
starting from a distribution where the debtor is repaying in the first step.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">x0</span>
<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;At time </span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2"> the distribution is </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">P</span><span class="o">.</span><span class="n">T</span> <span class="o">@</span> <span class="n">x</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>At time 0 the distribution is [1 0 0]
At time 1 the distribution is [0.85 0.1  0.05]
At time 2 the distribution is [0.7475 0.145  0.1075]
At time 3 the distribution is [0.671625 0.16175  0.166625]
At time 4 the distribution is [0.61131875 0.1642125  0.22446875]
At time 5 the distribution is [0.56067406 0.15965937 0.27966656]
At time 6 the distribution is [0.5164878  0.15186303 0.33164917]
At time 7 the distribution is [0.47698039 0.1427666  0.38025302]
At time 8 the distribution is [0.44112498 0.133358   0.42551703]
At time 9 the distribution is [0.40829573 0.1241273  0.46757697]
</pre></div>
</div>
</div>
</div>
<div class="admonition-exercise admonition" id="dir3-4-2">
<p class="admonition-title">Exercise</p>
<p>See exercise 2 in the <a class="reference internal" href="#ex3-4"><span class="std std-ref">exercise list</span></a>.</p>
</div>
<div class="admonition-exercise admonition" id="dir3-4-3">
<p class="admonition-title">Exercise</p>
<p>See exercise 3 in the <a class="reference internal" href="#ex3-4"><span class="std std-ref">exercise list</span></a>.</p>
</div>
</section>
</section>
<section id="continuous-distributions">
<h3>Continuous Distributions<a class="headerlink" href="#continuous-distributions" title="Permalink to this heading">#</a></h3>
<p>Recall that a continuous distribution is one where the value can take on an uncountable number of values.</p>
<p>It differs from a discrete distribution in that the events are not
countable.</p>
<p>We can use simulation to learn things about continuous distributions as we did with discrete
distributions.</p>
<p>Let’s use simulation to study what is arguably the most commonly encountered
distributions – the normal distribution.</p>
<p>The Normal (sometimes referred to as the Gaussian distribution) is bell-shaped and completely
described by the mean and variance of that distribution.</p>
<p>The mean is often referred to as <span class="math notranslate nohighlight">\(\mu\)</span> and the variance as <span class="math notranslate nohighlight">\(\sigma^2\)</span>.</p>
<p>Let’s take a look at the normal distribution.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># scipy is an extension of numpy, and the stats</span>
<span class="c1"># subpackage has tools for working with various probability distributions</span>
<span class="kn">import</span> <span class="nn">scipy.stats</span> <span class="k">as</span> <span class="nn">st</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="c1"># NOTE: first argument to st.norm is mean, second is standard deviation sigma (not sigma^2)</span>
<span class="n">pdf_x</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Normal Distribution ($\mu = 0, \sigma = 1$)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pdf_x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x7f4633fe2610&gt;]
</pre></div>
</div>
<img alt="../_images/4ad1d19a64b22ca86ba3ad580fbaa46016493f1239799b293e5ccfc2fb36330f.png" src="../_images/4ad1d19a64b22ca86ba3ad580fbaa46016493f1239799b293e5ccfc2fb36330f.png" />
</div>
</div>
<p>Another common continuous distribution used in economics is the gamma distribution.</p>
<p>A gamma distribution is defined for all positive numbers and described by both a shape
parameter <span class="math notranslate nohighlight">\(k\)</span> and a scale parameter <span class="math notranslate nohighlight">\(\theta\)</span>.</p>
<p>Let’s see what the distribution looks like for various choices of <span class="math notranslate nohighlight">\(k\)</span> and <span class="math notranslate nohighlight">\(\theta\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_gamma</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="c1"># scipy refers to the rate parameter beta as a scale parameter</span>
    <span class="n">pdf_x</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">gamma</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">theta</span><span class="p">)</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pdf_x</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;k = </span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">  theta = </span><span class="si">{</span><span class="n">theta</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ax</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">130</span><span class="p">)</span>
<span class="n">plot_gamma</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>
<span class="n">plot_gamma</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>
<span class="n">plot_gamma</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>
<span class="n">plot_gamma</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/5db7afc98a2db3e832afe60708cd495c3103d9d7b1150a16d7a53314cc676449.png" src="../_images/5db7afc98a2db3e832afe60708cd495c3103d9d7b1150a16d7a53314cc676449.png" />
</div>
</div>
<div class="admonition-exercise admonition" id="dir3-4-4">
<p class="admonition-title">Exercise</p>
<p>See exercise 4 in the <a class="reference internal" href="#ex3-4"><span class="std std-ref">exercise list</span></a>.</p>
</div>
</section>
</section>
<section id="exercises">
<span id="ex3-4"></span><h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this heading">#</a></h2>
<section id="exercise-1">
<h3>Exercise 1<a class="headerlink" href="#exercise-1" title="Permalink to this heading">#</a></h3>
<p>Wikipedia and other credible statistics sources tell us that the mean and
variance of the Uniform(0, 1) distribution are (1/2, 1/12) respectively.</p>
<p>How could we check whether the numpy random numbers approximate these
values?</p>
<p>(<a class="reference internal" href="#dir3-4-1"><span class="std std-ref">back to text</span></a>)</p>
</section>
<section id="exercise-2">
<h3>Exercise 2<a class="headerlink" href="#exercise-2" title="Permalink to this heading">#</a></h3>
<p>In this exercise, we explore the long-run, or stationary, distribution of the Markov chain.</p>
<p>The stationary distribution of a Markov chain is the probability distribution that would
result after an infinite number of steps <em>for any initial distribution</em>.</p>
<p>Mathematically, a stationary distribution <span class="math notranslate nohighlight">\(x\)</span> is a distribution where <span class="math notranslate nohighlight">\(x = P'x\)</span>.</p>
<p>In the code cell below, use the <code class="docutils literal notranslate"><span class="pre">stationary_distributions</span></code> property of <code class="docutils literal notranslate"><span class="pre">mc</span></code> to
determine the stationary distribution of our Markov chain.</p>
<p>After doing your computation, think about the answer… think about why our transition
probabilities must lead to this outcome.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># your code here</span>
</pre></div>
</div>
</div>
</div>
<p>(<a class="reference internal" href="#dir3-4-2"><span class="std std-ref">back to text</span></a>)</p>
</section>
<section id="exercise-3">
<h3>Exercise 3<a class="headerlink" href="#exercise-3" title="Permalink to this heading">#</a></h3>
<p>Let’s revisit the unemployment example from the <a class="reference internal" href="applied_linalg.html"><span class="doc">linear algebra lecture</span></a>.</p>
<p>We’ll repeat necessary details here.</p>
<p>Consider an economy where in any given year, <span class="math notranslate nohighlight">\(\alpha = 5\%\)</span> of workers lose their jobs, and
<span class="math notranslate nohighlight">\(\phi = 10\%\)</span> of unemployed workers find jobs.</p>
<p>Initially, 90% of the 1,000,000 workers are employed.</p>
<p>Also suppose that the average employed worker earns 10 dollars, while an unemployed worker
earns 1 dollar per period.</p>
<p>You now have four tasks:</p>
<ol class="arabic simple">
<li><p>Represent this problem as a Markov chain by defining the three components defined above.</p></li>
<li><p>Construct an instance of the quantecon MarkovChain by using the objects defined in part 1.</p></li>
<li><p>Simulate the Markov chain 30 times for 50 time periods, and plot each chain over time (see
helper code below).</p></li>
<li><p>Determine the average long run payment for a worker in this setting</p></li>
</ol>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Think about the stationary distribution.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define components here</span>

<span class="c1"># construct Markov chain</span>

<span class="c1"># simulate (see docstring for how to do many repetitions of</span>
<span class="c1"># the simulation in one function call)</span>
<span class="c1"># uncomment the lines below and fill in the blanks</span>
<span class="c1"># sim = XXXXX.simulate(XXXX)</span>
<span class="c1"># fig, ax = plt.subplots(figsize=(10, 8))</span>
<span class="c1"># ax.plot(range(50), sim.T, alpha=0.4)</span>

<span class="c1"># Long-run average payment</span>
</pre></div>
</div>
</div>
</div>
<p>(<a class="reference internal" href="#dir3-4-3"><span class="std std-ref">back to text</span></a>)</p>
</section>
<section id="exercise-4">
<h3>Exercise 4<a class="headerlink" href="#exercise-4" title="Permalink to this heading">#</a></h3>
<p>Assume you have been given the opportunity to choose between one of three financial assets:</p>
<p>You will be given the asset for free, allowed to hold it indefinitely, and keeping all payoffs.</p>
<p>Also assume the assets’ payoffs are distributed as follows:</p>
<ol class="arabic simple">
<li><p>Normal with <span class="math notranslate nohighlight">\(\mu = 10, \sigma = 5\)</span></p></li>
<li><p>Gamma with <span class="math notranslate nohighlight">\(k = 5.3, \theta = 2\)</span></p></li>
<li><p>Gamma with <span class="math notranslate nohighlight">\(k = 5, \theta = 2\)</span></p></li>
</ol>
<p>Use <code class="docutils literal notranslate"><span class="pre">scipy.stats</span></code> to answer the following questions:</p>
<ul class="simple">
<li><p>Which asset has the highest average returns?</p></li>
<li><p>Which asset has the highest median returns?</p></li>
<li><p>Which asset has the lowest coefficient of variation (standard deviation divided by mean)?</p></li>
<li><p>Which asset would you choose? Why?</p></li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>There is not a single right answer here. Be creative
and express your preferences.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># your code here</span>
</pre></div>
</div>
</div>
</div>
<p>(<a class="reference internal" href="#dir3-4-4"><span class="std std-ref">back to text</span></a>)</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./scientific"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                    </div>
                    
                </main> <!-- .page__content -->
                


                <footer class="qe-page__footer">

                    <p><a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="https://licensebuttons.net/l/by-sa/4.0/80x15.png"></a></p>

                    <p>Creative Commons License &ndash; This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International.</p>

                </footer> <!-- .page__footer -->

            </div> <!-- .page -->

            

            
            <div class="qe-sidebar bd-sidebar inactive persistent" id="site-navigation">

                <div class="qe-sidebar__header">


                    Contents

                </div>

                <nav class="qe-sidebar__nav" id="qe-sidebar-nav" aria-label="Main navigation">
                    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Introduction
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/index.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/overview.html">
   Course Description
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/getting_started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/cloud_setup.html">
   Cloud Setup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/local_install.html">
   Local Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/troubleshooting.html">
   Troubleshooting
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Python Fundamentals
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../python_fundamentals/index.html">
   Python Fundamentals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../python_fundamentals/basics.html">
   Basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../python_fundamentals/collections.html">
   Collections
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../python_fundamentals/control_flow.html">
   Control Flow
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../python_fundamentals/functions.html">
   Functions
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Scientific Computing
 </span>
</p>
<ul class="current nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="index.html">
   Scientific Computing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="numpy_arrays.html">
   Introduction to Numpy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="plotting.html">
   Plotting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="applied_linalg.html">
   Applied Linear Algebra
  </a>
 </li>
 <li class="toctree-l1 current active active">
  <a class="current reference internal" href="#">
   Randomness
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="optimization.html">
   Optimization
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Pandas
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/index.html">
   DataFrames and Series in Pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/basics.html">
   Basic Functionality
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/the_index.html">
   The Index
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/storage_formats.html">
   Storage Formats
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/data_clean.html">
   Cleaning Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/reshape.html">
   Reshape
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/merge.html">
   Merge
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/groupby.html">
   GroupBy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/timeseries.html">
   Time series
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Data Science Tools
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../tools/index.html">
   Data Science Tools
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tools/matplotlib.html">
   Intermediate Plotting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tools/maps.html">
   Mapping in Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tools/visualization_rules.html">
   Data Visualization: Rules and Guidelines
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tools/regression.html">
   Regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tools/classification.html">
   Classification
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Applications
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../applications/index.html">
   Applications
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../applications/ml_in_economics.html">
   Machine Learning in Economics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../applications/networks.html">
   Social and Economic Networks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../applications/recidivism.html">
   Case Study: Recidivism
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../applications/working_with_text.html">
   Working with Text
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../applications/heterogeneity.html">
   Heterogeneous Effects
  </a>
 </li>
</ul>

                </nav>

                <div class="qe-sidebar__footer">

                </div>

            </div> <!-- .sidebar -->
            
        </div> <!-- .main -->

        <div class="qe-toolbar">

            <div class="qe-toolbar__inner">

                <ul class="qe-toolbar__main">
                    <li data-tippy-content="Table of Contents" class="btn__sidebar"><i data-feather="menu"></i></li>
                    <li data-tippy-content="Home"><a href="../index.html"><i data-feather="home"></i></a></li>
                    <li class="btn__qelogo"><a href="https://quantecon.org" title=""><span class="show-for-sr">QuantEcon</span></a></li>
                    <!-- <li class="btn__search">
                        <form action="../search.html" method="get">
                            <input type="search" class="form-control" name="q" id="search-input" placeholder="Search..." aria-label="Search..." autocomplete="off">
                            <i data-feather="search"></i>
                        </form>
                    </li> -->
                </ul>

                <ul class="qe-toolbar__links">
                    <li data-tippy-content="Fullscreen" class="btn__fullscreen"><i data-feather="maximize"></i></li>
                    <li data-tippy-content="Increase font size" class="btn__plus"><i data-feather="plus-circle"></i></li>
                    <li data-tippy-content="Decrease font size" class="btn__minus"><i data-feather="minus-circle"></i></li>
                    <li data-tippy-content="Change contrast" class="btn__contrast"><i data-feather="sunset"></i></li>
                    <li data-tippy-content="Download Notebook"><a href="/_notebooks/scientific/randomness.ipynb" download><i data-feather="download-cloud"></i></a></li>
                    <li class="settings-button" id="settingsButton"><div data-tippy-content="Launch Notebook"><i data-feather="play-circle"></i></div></li>
                        <li data-tippy-content="Download PDF" onClick="window.print()"><i data-feather="file"></i></li>
                    <li data-tippy-content="View Source"><a target="_blank" href="https://github.com/QuantEcon/lecture-datascience.myst/tree/main/lectures/scientific/randomness.md" download><i data-feather="github"></i></a></li>
                </ul>

            </div>

        </div> <!-- .toolbar -->
        <div id="downloadPDFModal" style="display: none;">
            <ul class="pdf-options" style="display: block;">
                <li class="download-pdf-book" onClick="window.print()">
                    <p>Lecture (PDF)</p>
                </li>
                <li class="download-pdf-file">
                    <a href="" download><p>Book (PDF)</p></a>
                </li>
            </ul>
        </div>
        <div id="settingsModal" style="display: none;">
            <p class="modal-title"> Notebook Launcher </p>
            <div class="modal-desc">
            <p>
                Choose public or private cloud service for "Launch" button.
            </p>
            </div>
            <p class="modal-subtitle">Select a server</p>
            <ul class="modal-servers">
            <li class="active launcher-public">
                <span class="label">Public</span>
                <select id="launcher-public-input">
                
                    <option value="https://mybinder.org/v2/gh/QuantEcon/lecture-datascience.notebooks/main?urlpath=tree/scientific/randomness.ipynb">BinderHub</option>
                
                    <option value="https://colab.research.google.com/github/QuantEcon/lecture-datascience.notebooks/blob/main/scientific/randomness.ipynb">Colab</option>
                
                </select>
                <i class="fas fa-check-circle"></i>
            </li>
            <li class="launcher-private">
                <span class="label">Private</span>
                <input type="text" id="launcher-private-input" data-repourl="https://github.com/QuantEcon/lecture-datascience.notebooks" data-urlpath="tree/lecture-datascience.notebooks/scientific/randomness.ipynb" data-branch=main>
                <i class="fas fa-check-circle"></i>
            </li>
            </ul>
            <p class="launch"><a href="https://mybinder.org/v2/gh/QuantEcon/lecture-datascience.notebooks/main?urlpath=tree/scientific/randomness.ipynb" id="advancedLaunchButton" target="_blank">Launch Notebook</a></p>
            <script>
                // QuantEcon Notebook Launcher
                const launcherTypeElements = document.querySelectorAll('#settingsModal .modal-servers li');
                // Highlight the server type if previous selection exists
                if (typeof localStorage.launcherType !== 'undefined') {
                  for (var i = 0; i < launcherTypeElements.length; i++) {
                    launcherTypeElements[i].classList.remove('active');
                    if ( launcherTypeElements[i].classList.contains(localStorage.launcherType) ) {
                      launcherTypeElements[i].classList.add('active');
                    }
                  }
                }
                // Highlight server type on click and set local storage value
                for (var i = 0; i < launcherTypeElements.length; i++) {
                  launcherTypeElements[i].addEventListener('click', function() {
                    for (var j = 0; j < launcherTypeElements.length; j++) {
                      launcherTypeElements[j].classList.remove('active');
                    }
                    this.classList.add('active');
                    if ( this.classList.contains('launcher-private') ) {
                      localStorage.launcherType = 'launcher-private';
                    } else if ( this.classList.contains('launcher-public') ) {
                      localStorage.launcherType = 'launcher-public';
                    }
                    setLaunchServer();
                  })
                }
                const launcherPublic = document.getElementById('launcher-public-input');
                const launcherPrivate = document.getElementById('launcher-private-input');
                const pageName = "scientific/randomness";
                const repoURL = "https://github.com/QuantEcon/lecture-datascience.notebooks";
                const urlPath = "tree/lecture-datascience.notebooks/scientific/randomness.ipynb";
                const branch = "main"
                const launchNotebookLink = document.getElementById('advancedLaunchButton');

                // Highlight public server option if previous selection exists
                if (typeof localStorage.launcherPublic !== 'undefined') {
                  launcherPublic.value = localStorage.launcherPublic;
                }
                // Update local storage upon public server selection
                launcherPublic.addEventListener('change', (event) => {
                  setLaunchServer();
                });
                // Populate private server input if previous entry exists
                if (typeof localStorage.launcherPrivate !== 'undefined') {
                  launcherPrivate.value = localStorage.launcherPrivate;
                }
                // Update local storage when a private server is entered
                launcherPrivate.addEventListener('input', (event) => {
                  setLaunchServer();
                });

                // Function to update the "Launch Notebook" link href
                function setLaunchServer() {
                  launchNotebookLink.removeAttribute("style")
                  if ( localStorage.launcherType == 'launcher-private' ) {
                    let repoPrefix = "/jupyter/hub/user-redirect/git-pull?repo=" + repoURL + "&branch=" + branch + "&urlpath=" + urlPath;
                    launcherPrivateValue = launcherPrivate.value
                    if (!launcherPrivateValue) {
                        launchNotebookLink.removeAttribute("href")
                        launchNotebookLink.style.background = "grey"
                        return
                    }
                    localStorage.launcherPrivate = launcherPrivateValue;
                    privateServer = localStorage.launcherPrivate.replace(/\/$/, "")
                    if (!privateServer.includes("http")) {
                        privateServer = "http://" + privateServer
                    }
                    launchNotebookLinkURL = privateServer + repoPrefix;
                  } else if ( localStorage.launcherType == 'launcher-public' ) {
                    launcherPublicValue = launcherPublic.options[launcherPublic.selectedIndex].value;
                    localStorage.launcherPublic = launcherPublicValue;
                    launchNotebookLinkURL = localStorage.launcherPublic;
                  }
                  if (launchNotebookLinkURL) launchNotebookLink.href = launchNotebookLinkURL;
                }
                // Check if user has previously selected a server
                if ( (typeof localStorage.launcherPrivate !== 'undefined') || (typeof localStorage.launcherPublic !== 'undefined') ) {
                  setLaunchServer();
                }
                </script>

        </div>

    </div> <!-- .wrapper-->
  </body>
</html>